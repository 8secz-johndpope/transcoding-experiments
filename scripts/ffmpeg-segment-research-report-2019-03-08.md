# `ffmpeg -segment` research report 2019-03-08

## Tested files
- Simple videos with numbered frames
    - Each file contains 100 frames with numbers from 1 to 100.
    - Files were generated by producing a sequence of images with ImageMagick and converting them to a video with the codec and format specified in the name (see `generate-number-videos.sh` script).
    - File list
        - `numbers-100-flv1.flv`
        - `numbers-100-h263.3gp`
        - `numbers-100-h264.mp4`
        - `numbers-100-mpeg4.mpeg`
        - `numbers-100-theora.ogv`
        - `numbers-100-vp9.mp4`
        - `numbers-100-vp9.webm`
        - `numbers-100-wmv2.asf`
- Videos stored in this repository
    - `big-buck-bunny-[codec=theora].ogv`
    - `big-bunny-[codec=flv1].flv`
    - `ForBiggerBlazes-[codec=h264].mp4`
    - `ForBiggerMeltdowns-[codec=mpeg4].mp4`
    - `Panasonic-[codec=vp9].webm`
    - `star_trails-[codec=wmv2].wmv`
    - `TRA3106-[codec=h263].3gp`
- Problematic videos provided separately by the CGI team
    - `Beach.mp4`
    - `byger-liten.avi`
    - `gada.mp4`
    - `tortoise.mp4`
    - `gada-100-first-segment.mp4`
        - This the first segment produced by splitting `gada.mp4` with `ffmpeg -segment` into 100 parts.
        - It can be used as a shorter sample that still has the same problems as `gada.mp4`
- Other videos
    - [`grb_2.m4v`](http://mirrors.standaloneinstaller.com/video-sample/grb_2.m4v)
        - It's short but still has a sharp scene transition like `gada.mp4`.

## Experiments
The results below have been gathered from three experiments executed for each file:
- `segment-split-only`:
    - Splitting the input file with `ffmpeg -segment`
    - Merging the segments `ffmpeg -f concat` (no transcoding)
- `segment-split-half-scale`
    - Splitting the input file with `ffmpeg -segment`
    - Transcoding to half size with `ffmpeg -vf "scale=iw*0.5:ih*0.5"`
    - Merging the transcoded segments `ffmpeg -f concat`
    - Transcoding the input file in the same way without split and merge (for reference)
- `segment-split-vp9-convert`
    - Splitting the input file with `ffmpeg -segment`
    - Transcoding to a VP9 video in a Matroska container with `ffmpeg -vcodec vp9`
    - Merging the transcoded segments `ffmpeg -f concat`
    - Transcoding the input file in the same way without split and merge (for reference)

## General information about tested videos
### Columns
| column         | description                                                                             |
|----------------|-----------------------------------------------------------------------------------------|
| `video`        | Name of the video file                                                                  |
| `streams`      | Total number of streams in the video file                                               |
| `format`       | Container format (from `ffprobe -show_entries format=format_name`).                     |
| `codec`        | Codec used for the first video stream (from `ffprobe -show_entries stream=codec_name`). |
| `~in duration` | Duration of the video file, in seconds, rounded to the nearest integer.                 |
| `in#`          | Total number of frames in the video file.                                               |
| `in type`      | Frame types present in the file.                                                        |
| `#I in`        | Number of I-frames in the file.                                                         |
| `#P in`        | Number of P-frames in the file.                                                         |
| `#B in`        | Number of B-frames in the file.                                                         |

### Results
| video                                    | streams | format                  | codec      | ~in duration | in#   | in type | #I in  | #P in  | #B in  |
|------------------------------------------|---------|-------------------------|------------|--------------|-------|---------|--------|--------|--------|
| numbers-100-flv1.flv                     |       1 | flv                     | flv1       |            4 |   100 |      IP |      9 |     91 |      0 |
| numbers-100-h263.3gp                     |       1 | mov,mp4,m4a,3gp,3g2,mj2 | h263       |            4 |   100 |      IP |      9 |     91 |      0 |
| numbers-100-h264.mp4                     |       1 | mov,mp4,m4a,3gp,3g2,mj2 | h264       |            4 |   100 |     BIP |      1 |     32 |     67 |
| numbers-100-mpeg4.mpeg                   |       1 | mpeg                    | mpeg4      |            4 |   100 |      IP |      9 |     91 |      0 |
| numbers-100-theora.ogv                   |       1 | ogg                     | theora     |            4 |   100 |      IP |      9 |     91 |      0 |
| numbers-100-vp9.mp4                      |       1 | mov,mp4,m4a,3gp,3g2,mj2 | vp9        |            4 |   100 |      IP |      1 |     99 |      0 |
| numbers-100-vp9.webm                     |       1 | matroska,webm           | vp9        |            4 |   100 |      IP |      1 |     99 |      0 |
| numbers-100-wmv2.asf                     |       1 | asf                     | wmv2       |            4 |   100 |      IP |      9 |     91 |      0 |
| big-buck-bunny-[codec=theora].ogv        |       3 | ogg                     | theora     |           61 |  1450 |      IP |     27 |   1423 |      0 |
| big-bunny-[codec=flv1].flv               |       2 | flv                     | flv1       |           54 |  1352 |      IP |      7 |   1345 |      0 |
| ForBiggerBlazes-[codec=h264].mp4         |       2 | mov,mp4,m4a,3gp,3g2,mj2 | h264       |           15 |   360 |      IP |     14 |    346 |      0 |
| ForBiggerMeltdowns-[codec=mpeg4].mp4     |       2 | mov,mp4,m4a,3gp,3g2,mj2 | h264       |           15 |   361 |      IP |     12 |    349 |      0 |
| Panasonic-[codec=vp9].webm               |       2 | matroska,webm           | vp9        |           46 |  1152 |      IP |      9 |   1143 |      0 |
| star_trails-[codec=wmv2].wmv             |       2 | asf                     | wmv2       |           21 |   529 |      IP |     45 |    484 |      0 |
| TRA3106-[codec=h263].3gp                 |       1 | mov,mp4,m4a,3gp,3g2,mj2 | h263       |           17 |   509 |      IP |     53 |    456 |      0 |
| Beach.mp4                                |       2 | mov,mp4,m4a,3gp,3g2,mj2 | h264       |           80 |  1992 |     BIP |     27 |    509 |   1456 |
| byger-liten.avi                          |       1 | avi                     | mpeg4      |          121 |  3037 |      IP |     49 |   2988 |      0 |
| gada.mp4                                 |       2 | mov,mp4,m4a,3gp,3g2,mj2 | h264       |         1286 | 32144 |     BIP |    391 |  16942 |  14811 |
| tortoise.mp4                             |       2 | mov,mp4,m4a,3gp,3g2,mj2 | h264       |          152 |  4560 |     BIP |     51 |   1543 |   2966 |
| gada-100-first-segment.mp4               |       2 | mov,mp4,m4a,3gp,3g2,mj2 | h264       |           15 |   384 |     BIP |      8 |    198 |    178 |
| grb_2.m4v                                |       1 | mov,mp4,m4a,3gp,3g2,mj2 | h264       |           28 |   835 |     BIP |      6 |    226 |    603 |

## Video durations and start times

### Columns
| column         | description                                                                                                |
|----------------|------------------------------------------------------------------------------------------------------------|
| `video`        | Name of the video file used as input for the experiment.                                                   |
| `in duration`  | Duration of the input video.                                                                               |
| `out duration` | Duration of the video produced by transcoding without splitting and merging.                               |
| `mrg duration` | Duration of the video produced by merging transcoded segments.                                             |
| `in v start`   | `start_time` (in seconds) of the first video stream in the input video.                                    |
| `out v start`  | `start_time` (in seconds) of the first video stream in the video transcoded without splitting and merging. |
| `mrg v start`  | `start_time` (in seconds) of the first video stream in the merged video.                                   |
| `in a start`   | `start_time` (in seconds) of the first audio stream in the input video.                                    |
| `out v start`  | `start_time` (in seconds) of the first audio stream in the input transcoded without splitting and merging. |
| `mrg v start`  | `start_time` (in seconds) of the first audio stream in the merged video.                                   |

### Experiment: `segment-split-half-scale`
| video                                    | in duration | out duration | mrg duration | in v start | out v start | mrg v start | in a start | out v start | mrg v start |
|------------------------------------------|-------------|--------------|--------------|------------|-------------|-------------|------------|-------------|-------------|
| numbers-100-flv1.flv                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-h263.3gp                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-h264.mp4                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-mpeg4.mpeg                   |    3.920000 |     3.960000 |     3.960000 |   0.500000 |    0.540000 |    0.540000 |            |             |             |
| numbers-100-theora.ogv                   |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-vp9.mp4                      |    4.000000 |     4.000000 |     3.960000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-vp9.webm                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-wmv2.asf                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| big-buck-bunny-[codec=theora].ogv        |   60.708333 |    60.712727 |    11.973864 |   0.000000 |    0.000000 |             |   0.000000 |    0.000000 |    0.000000 |
| big-bunny-[codec=flv1].flv               |   54.082000 |    54.103000 |    54.232000 |   0.000000 |    0.020000 |    0.020000 |   0.003000 |    0.000000 |    0.000000 |
| ForBiggerBlazes-[codec=h264].mp4         |   15.021667 |    15.047000 |    15.158000 |   0.000000 |    0.000000 |    0.023000 |   0.000000 |    0.000000 |    0.000000 |
| ForBiggerMeltdowns-[codec=mpeg4].mp4     |   15.045000 |    15.070000 |    15.174000 |   0.000000 |    0.000000 |    0.023031 |   0.000000 |    0.000000 |    0.000000 |
| Panasonic-[codec=vp9].webm               |   46.120000 |    46.126000 |    46.192000 |   0.007000 |    0.007000 |    0.054000 |  -0.007000 |   -0.007000 |   -0.007000 |
| star_trails-[codec=wmv2].wmv             |   21.292000 |    21.292000 |    21.558000 |   0.043000 |    0.043000 |    0.043000 |   0.000000 |    0.000000 |    0.000000 |
| TRA3106-[codec=h263].3gp                 |   16.984000 |    16.984000 |    16.986000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| Beach.mp4                                |   79.743333 |    79.766000 |    79.766000 |   0.000000 |    0.000000 |    0.021016 |   0.000000 |    0.000000 |    0.000000 |
| byger-liten.avi                          |  121.480000 |   121.480000 |   121.480000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| gada.mp4                                 | 1285.781767 |  1285.805000 |  1285.805000 |   0.000000 |    0.000000 |    0.022969 |   0.000000 |    0.000000 |    0.000000 |
| tortoise.mp4                             |  152.170000 |   152.192000 |   152.193000 |   0.000000 |    0.000000 |    0.021000 |   0.000000 |    0.000000 |    0.000000 |
| gada-100-first-segment.mp4               |   15.360000 |    15.360000 |    15.360000 |   0.040000 |    0.000000 |    0.022969 |   0.040000 |    0.000000 |    0.000000 |
| grb_2.m4v                                |   27.862000 |    27.862000 |    27.863000 |   0.033000 |    0.000000 |    0.000000 |            |             |             |

### Experiment: `segment-split-vp9-convert`
| video                                    | in duration | out duration | mrg duration | in v start | out v start | mrg v start | in a start | out v start | mrg v start |
|------------------------------------------|-------------|--------------|--------------|------------|-------------|-------------|------------|-------------|-------------|
| numbers-100-flv1.flv                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-h263.3gp                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-h264.mp4                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-mpeg4.mpeg                   |    3.920000 |     4.000000 |     4.000000 |   0.500000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-theora.ogv                   |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-vp9.mp4                      |    4.000000 |     4.000000 |     3.960000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-vp9.webm                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| numbers-100-wmv2.asf                     |    4.000000 |     4.000000 |     4.000000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| big-buck-bunny-[codec=theora].ogv        |   60.708333 |    60.724000 |    60.752000 |   0.000000 |    0.012000 |             |   0.000000 |    0.000000 |    0.000000 |
| big-bunny-[codec=flv1].flv               |   54.082000 |    54.083000 |    54.166000 |   0.000000 |    0.000000 |    0.000000 |   0.003000 |    0.000000 |    0.000000 |
| ForBiggerBlazes-[codec=h264].mp4         |   15.021667 |    15.026000 |    15.088000 |   0.000000 |    0.003000 |    0.003000 |   0.000000 |    0.000000 |    0.000000 |
| ForBiggerMeltdowns-[codec=mpeg4].mp4     |   15.045000 |    15.050000 |    15.089000 |   0.000000 |    0.003000 |    0.003000 |   0.000000 |    0.000000 |    0.000000 |
| Panasonic-[codec=vp9].webm               |   46.120000 |    46.122000 |    46.168000 |   0.007000 |    0.003000 |    0.043000 |  -0.007000 |    0.000000 |    0.000000 |
| star_trails-[codec=wmv2].wmv             |   21.292000 |    21.251000 |    21.365000 |   0.043000 |    0.043000 |    0.043000 |   0.000000 |    0.000000 |    0.000000 |
| TRA3106-[codec=h263].3gp                 |   16.984000 |    16.983000 |    16.980000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| Beach.mp4                                |   79.743333 |    79.747000 |    79.765000 |   0.000000 |    0.003000 |    0.003000 |   0.000000 |    0.000000 |    0.000000 |
| byger-liten.avi                          |  121.480000 |   121.480000 |   121.480000 |   0.000000 |    0.000000 |    0.000000 |            |             |             |
| gada.mp4                                 | 1285.781767 |  1285.785000 |  1285.801000 |   0.000000 |    0.003000 |    0.003000 |   0.000000 |    0.000000 |    0.000000 |
| tortoise.mp4                             |  152.170000 |   152.173000 |   152.193000 |   0.000000 |    0.003000 |    0.003000 |   0.000000 |    0.000000 |    0.000000 |
| gada-100-first-segment.mp4               |   15.360000 |    15.363000 |    15.369000 |   0.040000 |    0.003000 |    0.003000 |   0.040000 |    0.000000 |    0.000000 |
| grb_2.m4v                                |   27.862000 |    27.861000 |    27.859000 |   0.033000 |    0.000000 |    0.000000 |            |             |             |

## Frame types
### Columns
| column           | description                                                                                                                                                   |
|------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `video`          | Name of the video file used as input for the experiment.                                                                                                      |
| `in#`            | Total number of frames in the input video.                                                                                                                    |
| `out#`           | Total number of frames in the video produced by transcoding without splitting and merging.                                                                    |
| `splt in#`       | Total number of frames in all the segments produced by split.                                                                                                 |
| `splt out#`      | Total number of frames in all the transcoded segments used as input for merge.                                                                                |
| `mrg#`           | Total number of frames in the video produced by merging transcoded segments.                                                                                  |
| `in type`        | Types of frames in the input video.                                                                                                                           |
| `out type`       | Types of frames in the video transcoded without merge and split.                                                                                              |
| `splt in type`   | Types of frames in all the segments produced by split.                                                                                                        |
| `splt out type`  | Types of frames in all the transcoded segments used as input for merge.                                                                                       |
| `mrg type`       | Types of frames in the video produced by merging transcoded segments.                                                                                         |
| `#I in`          | Number of I-frames in the input video.                                                                                                                        |
| `#I out`         | Number of I-frames in the video produced by transcoding without splitting and merging.                                                                        |
| `#I splt in`     | Number of I-frames in all the segments produced by split.                                                                                                     |
| `#I splt out`    | Number of I-frames in all the transcoded segments used as input for merge.                                                                                    |
| `#I mrg`         | Number of I-frames in the video produced by merging transcoded segments.                                                                                      |
| `#P in`          | Number of P-frames in the input video.                                                                                                                        |
| `#P out`         | Number of P-frames in the video produced by transcoding without splitting and merging.                                                                        |
| `#P splt in`     | Number of P-frames in all the segments produced by split.                                                                                                     |
| `#P splt out`    | Number of P-frames in all the transcoded segments used as input for merge.                                                                                    |
| `#P mrg`         | Number of P-frames in the video produced by merging transcoded segments.                                                                                      |
| `#B in`          | Number of B-frames in the input video.                                                                                                                        |
| `#B out`         | Number of B-frames in the video produced by transcoding without splitting and merging.                                                                        |
| `#B splt in`     | Number of B-frames in all the segments produced by split.                                                                                                     |
| `#B splt out`    | Number of B-frames in all the transcoded segments used as input for merge.                                                                                    |
| `#B mrg`         | Number of B-frames in the video produced by merging transcoded segments.                                                                                      |
| `in == out`      | Is the sequence of frame types identical between the input video and transcoded video produced without merge and split?                                       |
| `out == mrg`     | Is the sequence of frame types identical between the transcoded video produced without merge and split and the video produced by merging transcoded segments? |
| `in == splt in`  | Is the sequence of frame types identical between the input video and all the segments (non-transcoded)?                                                       |
| `splt in == mrg` | Is the sequence of frame types identical between all the segments (non-transcoded) and the video produced by merging transcoded segments?                     |

### Experiment: `segment-split-half-scale`
| video                                    | in#   | out#  | splt in# | splt out# | mrg#  | in type | out type | splt in type | splt out type | mrg type | #I in  | #I out | #I splt in | #I splt out | #I mrg | #P in  | #P out | #P splt in | #P splt out | #P mrg | #B in  | #B out | #B splt in | #B splt out | #B mrg | in == out | out == mrg | in == splt in | splt in == mrg |
|------------------------------------------|-------|-------|----------|-----------|-------|---------|----------|--------------|---------------|----------|--------|--------|------------|-------------|--------|--------|--------|------------|-------------|--------|--------|--------|------------|-------------|--------|-----------|------------|---------------|----------------|
| numbers-100-flv1.flv                     |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      9 |          9 |           9 |      9 |     91 |     91 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |       yes |        yes |           yes |            yes |
| numbers-100-h263.3gp                     |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      9 |          9 |           9 |      9 |     91 |     91 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |       yes |        yes |           yes |            yes |
| numbers-100-h264.mp4                     |   100 |   100 |      100 |       100 |   100 |     BIP |      BIP |          BIP |           BIP |      BIP |      1 |      1 |          1 |           1 |      1 |     32 |     33 |         32 |          33 |     33 |     67 |     66 |         67 |          66 |     66 |        no |        yes |           yes |             no |
| numbers-100-mpeg4.mpeg                   |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      9 |          9 |           9 |      9 |     91 |     91 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |       yes |        yes |           yes |            yes |
| numbers-100-theora.ogv                   |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      9 |          9 |           9 |      9 |     91 |     91 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |       yes |        yes |           yes |            yes |
| numbers-100-vp9.mp4                      |   100 |   100 |       99 |        99 |    99 |      IP |      BIP |           IP |           BIP |      BIP |      1 |      1 |          1 |           1 |      1 |     99 |     33 |         98 |          32 |     32 |      0 |     66 |          0 |          66 |     66 |        no |         no |            no |             no |
| numbers-100-vp9.webm                     |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      1 |      1 |          1 |           1 |      1 |     99 |     99 |         99 |          99 |     99 |      0 |      0 |          0 |           0 |      0 |       yes |        yes |           yes |            yes |
| numbers-100-wmv2.asf                     |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      9 |          9 |           9 |      9 |     91 |     91 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |       yes |        yes |           yes |            yes |
| big-buck-bunny-[codec=theora].ogv        |  1450 |  1449 |     1167 |      1168 |     0 |      IP |       IP |           IP |            IP |          |     27 |    128 |         21 |         102 |      0 |   1423 |   1321 |       1146 |        1066 |      0 |      0 |      0 |          0 |           0 |      0 |        no |         no |            no |             no |
| big-bunny-[codec=flv1].flv               |  1352 |  1352 |     1352 |      1352 |  1352 |      IP |       IP |           IP |            IP |       IP |      7 |    119 |          7 |         118 |    118 |   1345 |   1233 |       1345 |        1234 |   1234 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| ForBiggerBlazes-[codec=h264].mp4         |   360 |   360 |      360 |       360 |   360 |      IP |      BIP |           IP |           BIP |      BIP |     14 |      6 |         14 |           8 |      8 |    346 |    135 |        346 |         135 |    135 |      0 |    219 |          0 |         217 |    217 |        no |         no |           yes |             no |
| ForBiggerMeltdowns-[codec=mpeg4].mp4     |   361 |   361 |      361 |       361 |   361 |      IP |      BIP |           IP |           BIP |      BIP |     12 |      8 |         12 |          10 |     10 |    349 |    146 |        349 |         145 |    145 |      0 |    207 |          0 |         206 |    206 |        no |         no |           yes |             no |
| Panasonic-[codec=vp9].webm               |  1152 |  1152 |     1152 |      1152 |  1152 |      IP |       IP |           IP |            IP |       IP |      9 |      9 |          9 |           9 |      9 |   1143 |   1143 |       1143 |        1143 |   1143 |      0 |      0 |          0 |           0 |      0 |       yes |        yes |           yes |            yes |
| star_trails-[codec=wmv2].wmv             |   529 |   530 |      529 |       530 |   530 |      IP |       IP |           IP |            IP |       IP |     45 |     45 |         45 |          46 |     46 |    484 |    485 |        484 |         484 |    484 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| TRA3106-[codec=h263].3gp                 |   509 |   509 |      509 |       509 |   509 |      IP |       IP |           IP |            IP |       IP |     53 |     48 |         53 |          48 |     48 |    456 |    461 |        456 |         461 |    461 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| Beach.mp4                                |  1992 |  1992 |     1992 |      1992 |  1992 |     BIP |      BIP |          BIP |           BIP |      BIP |     27 |      8 |         27 |          10 |     10 |    509 |    502 |        509 |         501 |    501 |   1456 |   1482 |       1456 |        1481 |   1481 |        no |         no |           yes |             no |
| byger-liten.avi                          |  3037 |  3037 |     3037 |      3037 |  3037 |      IP |       IP |           IP |            IP |       IP |     49 |    260 |         49 |         260 |    260 |   2988 |   2777 |       2988 |        2777 |   2777 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| gada.mp4                                 | 32144 | 32144 |    32144 |     32144 | 32144 |     BIP |      BIP |          BIP |           BIP |      BIP |    391 |    236 |        391 |         239 |    239 |  16942 |   9774 |      16942 |        9772 |   9772 |  14811 |  22134 |      14811 |       22133 |  22133 |        no |         no |           yes |             no |
| tortoise.mp4                             |  4560 |  4560 |     4560 |      4560 |  4560 |     BIP |      BIP |          BIP |           BIP |      BIP |     51 |     19 |         51 |          21 |     21 |   1543 |   1230 |       1543 |        1225 |   1225 |   2966 |   3311 |       2966 |        3314 |   3314 |        no |         no |           yes |             no |
| gada-100-first-segment.mp4               |   384 |   384 |      384 |       384 |   384 |     BIP |      BIP |          BIP |           BIP |      BIP |      8 |      6 |          8 |           8 |      8 |    198 |    126 |        198 |         126 |    126 |    178 |    252 |        178 |         250 |    250 |        no |         no |           yes |             no |
| grb_2.m4v                                |   835 |   835 |      835 |       835 |   835 |     BIP |      BIP |          BIP |           BIP |      BIP |      6 |      6 |          6 |           6 |      6 |    226 |    317 |        226 |         314 |    314 |    603 |    512 |        603 |         515 |    515 |        no |         no |           yes |             no |

### Experiment: `segment-split-vp9-convert`
| video                                    | in#   | out#  | splt in# | splt out# | mrg#  | in type | out type | splt in type | splt out type | mrg type | #I in  | #I out | #I splt in | #I splt out | #I mrg | #P in  | #P out | #P splt in | #P splt out | #P mrg | #B in  | #B out | #B splt in | #B splt out | #B mrg | in == out | out == mrg | in == splt in | splt in == mrg |
|------------------------------------------|-------|-------|----------|-----------|-------|---------|----------|--------------|---------------|----------|--------|--------|------------|-------------|--------|--------|--------|------------|-------------|--------|--------|--------|------------|-------------|--------|-----------|------------|---------------|----------------|
| numbers-100-flv1.flv                     |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      1 |          9 |           9 |      9 |     91 |     99 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |            yes |
| numbers-100-h263.3gp                     |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      1 |          9 |           9 |      9 |     91 |     99 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |            yes |
| numbers-100-h264.mp4                     |   100 |   100 |      100 |       100 |   100 |     BIP |       IP |          BIP |            IP |       IP |      1 |      1 |          1 |           1 |      1 |     32 |     99 |         32 |          99 |     99 |     67 |      0 |         67 |           0 |      0 |        no |        yes |           yes |             no |
| numbers-100-mpeg4.mpeg                   |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      1 |          9 |           9 |      9 |     91 |     99 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |            yes |
| numbers-100-theora.ogv                   |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      1 |          9 |           9 |      9 |     91 |     99 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |            yes |
| numbers-100-vp9.mp4                      |   100 |   100 |       99 |        99 |    99 |      IP |       IP |           IP |            IP |       IP |      1 |      1 |          1 |           1 |      1 |     99 |     99 |         98 |          98 |     98 |      0 |      0 |          0 |           0 |      0 |       yes |         no |            no |            yes |
| numbers-100-vp9.webm                     |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      1 |      1 |          1 |           1 |      1 |     99 |     99 |         99 |          99 |     99 |      0 |      0 |          0 |           0 |      0 |       yes |        yes |           yes |            yes |
| numbers-100-wmv2.asf                     |   100 |   100 |      100 |       100 |   100 |      IP |       IP |           IP |            IP |       IP |      9 |      1 |          9 |           9 |      9 |     91 |     99 |         91 |          91 |     91 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |            yes |
| big-buck-bunny-[codec=theora].ogv        |  1450 |  1450 |     1167 |      1167 |     0 |      IP |       IP |           IP |            IP |          |     27 |     12 |         21 |          10 |      0 |   1423 |   1438 |       1146 |        1157 |      0 |      0 |      0 |          0 |           0 |      0 |        no |         no |            no |             no |
| big-bunny-[codec=flv1].flv               |  1352 |  1352 |     1352 |      1352 |  1352 |      IP |       IP |           IP |            IP |       IP |      7 |     11 |          7 |          14 |     14 |   1345 |   1341 |       1345 |        1338 |   1338 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| ForBiggerBlazes-[codec=h264].mp4         |   360 |   360 |      360 |       360 |   360 |      IP |       IP |           IP |            IP |       IP |     14 |      3 |         14 |           5 |      5 |    346 |    357 |        346 |         355 |    355 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| ForBiggerMeltdowns-[codec=mpeg4].mp4     |   361 |   361 |      361 |       361 |   361 |      IP |       IP |           IP |            IP |       IP |     12 |      3 |         12 |           5 |      5 |    349 |    358 |        349 |         356 |    356 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| Panasonic-[codec=vp9].webm               |  1152 |  1152 |     1152 |      1152 |  1152 |      IP |       IP |           IP |            IP |       IP |      9 |      9 |          9 |           9 |      9 |   1143 |   1143 |       1143 |        1143 |   1143 |      0 |      0 |          0 |           0 |      0 |       yes |        yes |           yes |            yes |
| star_trails-[codec=wmv2].wmv             |   529 |   529 |      529 |       529 |   529 |      IP |       IP |           IP |            IP |       IP |     45 |      5 |         45 |           6 |      6 |    484 |    524 |        484 |         523 |    523 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| TRA3106-[codec=h263].3gp                 |   509 |   509 |      509 |       509 |   509 |      IP |       IP |           IP |            IP |       IP |     53 |      4 |         53 |           6 |      6 |    456 |    505 |        456 |         503 |    503 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| Beach.mp4                                |  1992 |  1992 |     1992 |      1992 |  1992 |     BIP |       IP |          BIP |            IP |       IP |     27 |     16 |         27 |          17 |     17 |    509 |   1976 |        509 |        1975 |   1975 |   1456 |      0 |       1456 |           0 |      0 |        no |         no |           yes |             no |
| byger-liten.avi                          |  3037 |  3037 |     3037 |      3037 |  3037 |      IP |       IP |           IP |            IP |       IP |     49 |     24 |         49 |          25 |     25 |   2988 |   3013 |       2988 |        3012 |   3012 |      0 |      0 |          0 |           0 |      0 |        no |         no |           yes |             no |
| gada.mp4                                 | 32144 | 32144 |    32144 |     32144 | 32144 |     BIP |       IP |          BIP |            IP |       IP |    391 |    252 |        391 |         252 |    252 |  16942 |  31892 |      16942 |       31892 |  31892 |  14811 |      0 |      14811 |           0 |      0 |        no |        yes |           yes |             no |
| tortoise.mp4                             |  4560 |  4560 |     4560 |      4560 |  4560 |     BIP |       IP |          BIP |            IP |       IP |     51 |     36 |         51 |          41 |     41 |   1543 |   4524 |       1543 |        4519 |   4519 |   2966 |      0 |       2966 |           0 |      0 |        no |         no |           yes |             no |
| gada-100-first-segment.mp4               |   384 |   384 |      384 |       384 |   384 |     BIP |       IP |          BIP |            IP |       IP |      8 |      3 |          8 |           3 |      3 |    198 |    381 |        198 |         381 |    381 |    178 |      0 |        178 |           0 |      0 |        no |        yes |           yes |             no |
| grb_2.m4v                                |   835 |   835 |      835 |       835 |   835 |     BIP |       IP |          BIP |            IP |       IP |      6 |      7 |          6 |           8 |      8 |    226 |    828 |        226 |         827 |    827 |    603 |      0 |        603 |           0 |      0 |        no |         no |           yes |             no |

### Experiment: `segment-split-only`
| video                                    | in#   | splt in# | mrg#  | in type | splt in type | mrg type | #I in  | #I splt in | #I mrg | #P in  | #P splt in | #P mrg | #B in  | #B splt in | #B mrg | in == splt in | splt in == mrg |
|------------------------------------------|-------|----------|-------|---------|--------------|----------|--------|------------|--------|--------|------------|--------|--------|------------|--------|---------------|----------------|
| numbers-100-flv1.flv                     |   100 |      100 |   100 |      IP |           IP |       IP |      9 |          9 |      9 |     91 |         91 |     91 |      0 |          0 |      0 |           yes |            yes |
| numbers-100-h263.3gp                     |   100 |      100 |   100 |      IP |           IP |       IP |      9 |          9 |      9 |     91 |         91 |     91 |      0 |          0 |      0 |           yes |            yes |
| numbers-100-h264.mp4                     |   100 |      100 |   100 |     BIP |          BIP |      BIP |      1 |          1 |      1 |     32 |         32 |     32 |     67 |         67 |     67 |           yes |            yes |
| numbers-100-mpeg4.mpeg                   |   100 |      100 |   100 |      IP |           IP |       IP |      9 |          9 |      9 |     91 |         91 |     91 |      0 |          0 |      0 |           yes |            yes |
| numbers-100-theora.ogv                   |   100 |      100 |   100 |      IP |           IP |       IP |      9 |          9 |      9 |     91 |         91 |     91 |      0 |          0 |      0 |           yes |            yes |
| numbers-100-vp9.mp4                      |   100 |       99 |   100 |      IP |           IP |       IP |      1 |          1 |      1 |     99 |         98 |     99 |      0 |          0 |      0 |            no |             no |
| numbers-100-vp9.webm                     |   100 |      100 |   100 |      IP |           IP |       IP |      1 |          1 |      1 |     99 |         99 |     99 |      0 |          0 |      0 |           yes |            yes |
| numbers-100-wmv2.asf                     |   100 |      100 |   100 |      IP |           IP |       IP |      9 |          9 |      9 |     91 |         91 |     91 |      0 |          0 |      0 |           yes |            yes |
| big-buck-bunny-[codec=theora].ogv        |  1450 |     1167 |     0 |      IP |           IP |          |     27 |         21 |      0 |   1423 |       1146 |      0 |      0 |          0 |      0 |            no |             no |
| big-bunny-[codec=flv1].flv               |  1352 |     1352 |  1352 |      IP |           IP |       IP |      7 |          7 |      7 |   1345 |       1345 |   1345 |      0 |          0 |      0 |           yes |            yes |
| ForBiggerBlazes-[codec=h264].mp4         |   360 |      360 |   360 |      IP |           IP |       IP |     14 |         14 |     14 |    346 |        346 |    346 |      0 |          0 |      0 |           yes |            yes |
| ForBiggerMeltdowns-[codec=mpeg4].mp4     |   361 |      361 |   361 |      IP |           IP |       IP |     12 |         12 |     12 |    349 |        349 |    349 |      0 |          0 |      0 |           yes |            yes |
| Panasonic-[codec=vp9].webm               |  1152 |     1152 |  1152 |      IP |           IP |       IP |      9 |          9 |      9 |   1143 |       1143 |   1143 |      0 |          0 |      0 |           yes |            yes |
| star_trails-[codec=wmv2].wmv             |   529 |      529 |   529 |      IP |           IP |       IP |     45 |         45 |     45 |    484 |        484 |    484 |      0 |          0 |      0 |           yes |            yes |
| TRA3106-[codec=h263].3gp                 |   509 |      509 |   509 |      IP |           IP |       IP |     53 |         53 |     53 |    456 |        456 |    456 |      0 |          0 |      0 |           yes |            yes |
| Beach.mp4                                |  1992 |     1992 |  1992 |     BIP |          BIP |      BIP |     27 |         27 |     27 |    509 |        509 |    509 |   1456 |       1456 |   1456 |           yes |            yes |
| byger-liten.avi                          |  3037 |     3037 |  3037 |      IP |           IP |       IP |     49 |         49 |     49 |   2988 |       2988 |   2988 |      0 |          0 |      0 |           yes |            yes |
| gada.mp4                                 | 32144 |    32144 | 32144 |     BIP |          BIP |      BIP |    391 |        391 |    391 |  16942 |      16942 |  16942 |  14811 |      14811 |  14811 |           yes |            yes |
| tortoise.mp4                             |  4560 |     4560 |  4560 |     BIP |          BIP |      BIP |     51 |         51 |     51 |   1543 |       1543 |   1543 |   2966 |       2966 |   2966 |           yes |            yes |
| gada-100-first-segment.mp4               |   384 |      384 |   384 |     BIP |          BIP |      BIP |      8 |          8 |      8 |    198 |        198 |    198 |    178 |        178 |    178 |           yes |            yes |
| grb_2.m4v                                |   835 |      835 |   835 |     BIP |          BIP |      BIP |      6 |          6 |      6 |    226 |        226 |    226 |    603 |        603 |    603 |           yes |            yes |
